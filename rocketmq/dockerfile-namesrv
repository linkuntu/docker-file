FROM docker.io/openjdk:8-jre-alpine

ARG version

# Rocketmq version
ENV ROCKETMQ_VERSION 4.2.0

ENV ROCKETMQ_HOME  /rocketmq/rocketmq-4.2.0

WORKDIR  ${ROCKETMQ_HOME}
RUN mkdir -p /rocketmq/rocketmq-4.2.0
RUN mkdir -p \
		/rocketmq/logs \
	    /rocketmq/store


COPY rocketmq-all-4.2.0-bin-release.zip /rocketmq/rocketmq-4.2.0/
RUN  unzip  rocketmq-all-4.2.0-bin-release.zip

RUN chmod +x bin/mqnamesrv
CMD  cd bin && export JAVA_OPT=" -Duser.home=/rocketmq" && sh mqnamesrv


EXPOSE 9876
VOLUME /rocketmq
